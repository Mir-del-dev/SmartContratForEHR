(()=>{void 0!==window.ethereum?console.log("MetaMask trouvé !"):alert("Veuillez installer MetaMask !");const e=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"doctor",type:"address"}],name:"canAccess",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"doctorsWithAccess",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDoctorsWithAccess",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"doctor",type:"address"},{internalType:"uint256",name:"duration",type:"uint256"}],name:"grantAccess",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"patient",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"permissions",outputs:[{internalType:"address",name:"doctor",type:"address"},{internalType:"uint256",name:"validUntil",type:"uint256"},{internalType:"bool",name:"canAccess",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"doctor",type:"address"}],name:"revokeAccess",outputs:[],stateMutability:"nonpayable",type:"function"}];let t,n;document.getElementById("requestAccessButton").addEventListener("click",grantAccess),window.onload=async function(){try{t=new Web3(window.ethereum),await ethereum.request({method:"eth_requestAccounts"}),n=new t.eth.Contract(e,"0x5fbdb2315678afecb367f032d93f642f64180aa3"),console.log("Contrat initialisé !")}catch(e){console.error("Erreur d'initialisation",e)}}})();